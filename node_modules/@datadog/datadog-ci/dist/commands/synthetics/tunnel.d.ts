import { ProxyConfiguration } from '../../helpers/utils';
import { MainReporter } from './interfaces';
export interface TunnelInfo {
    host: string;
    id: string;
    privateKey: string;
}
export declare class Tunnel {
    private url;
    private testIDs;
    private connected;
    private forwardedSockets;
    private FORWARDING_TIMEOUT;
    private log;
    private logError;
    private logWarning;
    private multiplexer?;
    private privateKey;
    private publicKey;
    private sshConfig;
    private ws;
    constructor(url: string, testIDs: string[], proxy: ProxyConfiguration, reporter: MainReporter);
    /**
     * keepAlive will return a promise that tracks the state of the tunnel (and reject in case of error)
     */
    keepAlive(): Promise<void>;
    /**
     * start the tunnel:
     *   - get the pre-signed URL to connect to the tunnel service
     *   - Set up SSH
     *   - establish a WebSocket connection to the tunnel service
     */
    start(): Promise<TunnelInfo>;
    /**
     * stop the tunnel
     */
    stop(): Promise<void>;
    private authenticateSSHConnection;
    private forwardProxiedPacketsFromSSH;
    private forwardWebSocketToSSH;
    private getConnectionInfo;
    private processSSHStream;
}
